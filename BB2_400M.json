{
    "opt": {
        "init_opt": null,
        "allow_missing_init_opts": false,
        "task": "fromfile:parlaiformat,projects.seeker_convai3.tasks.search_query",
        "download_path": null,
        "loglevel": "info",
        "datatype": "valid",
        "image_mode": "raw",
        "hide_labels": false,
        "multitask_weights": [
            5.0,
            1.0
        ],
        "batchsize": 1,
        "dynamic_batching": null,
        "verbose": false,
        "is_debug": false,
        "datapath": "/home/jovyan/github_repos/ParlAI/data",
        "model": null,
        "model_file": "/home/jovyan/github_repos/ParlAI/data/models/blenderbot2/blenderbot2_400M/model",
        "init_model": null,
        "dict_class": "parlai.core.dict:DictionaryAgent",
        "report_filename": "BB2_400M.json",
        "world_logs": "",
        "save_format": "conversations",
        "area_under_curve_digits": -1,
        "area_under_curve_class": null,
        "num_examples": 5,
        "display_examples": false,
        "log_every_n_secs": 10,
        "metrics": "ppl,f1,accuracy,hits@1,rouge,bleu",
        "aggregate_micro": false,
        "log_keep_fields": "all",
        "tensorboard_log": true,
        "tensorboard_logdir": "evaluation_convai3",
        "image_size": 256,
        "image_cropsize": 224,
        "fromfile_datapath": "./parlai/tasks/convai3/huggingface/convai3",
        "fromfile_datatype_extension": true,
        "teacher_seed": null,
        "mutators": null,
        "include_persona": true,
        "skip_empty_text": true,
        "dialog_history": "full",
        "only_last_search_query": false,
        "candidates": "inline",
        "eval_candidates": "inline",
        "interactive_candidates": "fixed",
        "repeat_blocking_heuristic": true,
        "fixed_candidates_path": null,
        "fixed_candidate_vecs": "reuse",
        "encode_candidate_vecs": true,
        "encode_candidate_vecs_batchsize": 256,
        "train_predict": false,
        "cap_num_predictions": 100,
        "ignore_bad_candidates": false,
        "rank_top_k": -1,
        "return_cand_scores": false,
        "use_memories": false,
        "wrap_memory_encoder": false,
        "memory_attention": "sqrt",
        "normalize_sent_emb": false,
        "share_encoders": true,
        "learn_embeddings": true,
        "data_parallel": false,
        "reduction_type": "mean",
        "polyencoder_type": "codes",
        "poly_n_codes": 64,
        "poly_attention_type": "basic",
        "poly_attention_num_heads": 4,
        "codes_attention_type": "basic",
        "codes_attention_num_heads": 4,
        "embedding_size": 300,
        "n_layers": 2,
        "ffn_size": 300,
        "dropout": 0.0,
        "attention_dropout": 0.0,
        "relu_dropout": 0.0,
        "n_heads": 2,
        "learn_positional_embeddings": false,
        "embeddings_scale": true,
        "n_positions": null,
        "n_segments": 0,
        "variant": "aiayn",
        "activation": "relu",
        "output_scaling": 1.0,
        "share_word_embeddings": true,
        "n_encoder_layers": -1,
        "n_decoder_layers": -1,
        "model_parallel": false,
        "checkpoint_activations": false,
        "generation_model": "bart",
        "query_model": "bert",
        "rag_model_type": "token",
        "thorough": false,
        "n_extra_positions": 0,
        "gold_knowledge_passage_key": "checked_sentence",
        "gold_knowledge_title_key": "title",
        "rag_retriever_query": "full_history",
        "rag_retriever_type": "dpr",
        "retriever_debug_index": null,
        "n_docs": 5,
        "min_doc_token_length": 64,
        "max_doc_token_length": 256,
        "rag_query_truncate": 512,
        "print_docs": false,
        "path_to_index": "zoo:hallucination/wiki_index_compressed/compressed_pq",
        "path_to_dense_embeddings": null,
        "dpr_model_file": "zoo:hallucination/multiset_dpr/hf_bert_base.cp",
        "path_to_dpr_passages": "zoo:hallucination/wiki_passages/psgs_w100.tsv",
        "retriever_embedding_size": 768,
        "tfidf_max_doc_paragraphs": -1,
        "tfidf_model_path": "zoo:wikipedia_full/tfidf_retriever/model",
        "dpr_num_docs": 25,
        "poly_score_initial_lambda": 0.5,
        "polyencoder_init_model": "wikito",
        "poly_faiss_model_file": null,
        "regret": false,
        "regret_intermediate_maxlen": 32,
        "regret_model_file": null,
        "regret_dict_file": null,
        "regret_override_index": false,
        "indexer_type": "compressed",
        "indexer_buffer_size": 65536,
        "compressed_indexer_factory": "IVF4096_HNSW128,PQ128",
        "compressed_indexer_gpu_train": false,
        "compressed_indexer_nprobe": 64,
        "hnsw_indexer_store_n": 128,
        "hnsw_ef_search": 128,
        "hnsw_ef_construction": 200,
        "rag_turn_n_turns": 2,
        "rag_turn_marginalize": "doc_then_turn",
        "rag_turn_discount_factor": 1.0,
        "beam_size": 1,
        "beam_min_length": 1,
        "beam_context_block_ngram": -1,
        "beam_block_ngram": -1,
        "beam_block_full_context": true,
        "beam_length_penalty": 0.65,
        "skip_generation": false,
        "inference": "greedy",
        "topk": 10,
        "topp": 0.9,
        "beam_delay": 30,
        "lambda_decay": 0.9,
        "omega_bound": 0.3,
        "p_reset": true,
        "beam_block_list_filename": null,
        "temperature": 1.0,
        "compute_tokenized_bleu": false,
        "gpu_beam_blocking": false,
        "interactive_mode": false,
        "embedding_type": "random",
        "embedding_projection": "random",
        "fp16": false,
        "fp16_impl": "safe",
        "force_fp16_tokens": false,
        "optimizer": "adamax",
        "learningrate": 0.0001,
        "gradient_clip": 0.1,
        "adam_eps": 1e-08,
        "adafactor_eps": [
            1e-30,
            0.001
        ],
        "momentum": 0,
        "nesterov": true,
        "nus": [
            0.7
        ],
        "betas": [
            0.9,
            0.999
        ],
        "weight_decay": null,
        "rank_candidates": false,
        "truncate": 1024,
        "text_truncate": null,
        "label_truncate": null,
        "history_reversed": false,
        "history_size": -1,
        "person_tokens": false,
        "split_lines": false,
        "use_reply": "label",
        "add_p1_after_newln": false,
        "delimiter": "\n",
        "history_add_global_end_token": null,
        "special_tok_lst": null,
        "gpu": -1,
        "no_cuda": false,
        "dict_file": null,
        "dict_initpath": null,
        "dict_language": "english",
        "dict_max_ngram_size": -1,
        "dict_minfreq": 0,
        "dict_maxtokens": -1,
        "dict_nulltoken": "__null__",
        "dict_starttoken": "__start__",
        "dict_endtoken": "__end__",
        "dict_unktoken": "__unk__",
        "dict_tokenizer": "re",
        "dict_lower": false,
        "bpe_debug": false,
        "dict_textfields": "text,labels",
        "bpe_vocab": null,
        "bpe_merge": null,
        "bpe_add_prefix_space": null,
        "bpe_dropout": null,
        "lr_scheduler": "reduceonplateau",
        "lr_scheduler_patience": 3,
        "lr_scheduler_decay": 0.5,
        "invsqrt_lr_decay_gamma": -1,
        "warmup_updates": -1,
        "warmup_rate": 0.0001,
        "update_freq": 1,
        "t5_model_arch": "t5-base",
        "t5_model_parallel": false,
        "t5_dropout": 0.0,
        "t5_generation_config": null,
        "search_query_generator_model_file": null,
        "search_query_generator_inference": "greedy",
        "search_query_generator_beam_min_length": 1,
        "search_query_generator_beam_size": 1,
        "search_query_generator_text_truncate": 512,
        "splitted_chunk_length": 256,
        "doc_chunk_split_mode": "word",
        "n_ranked_doc_chunks": 1,
        "doc_chunks_ranker": "head",
        "woi_doc_chunk_size": 500,
        "search_server": "http://localhost:8081",
        "knowledge_access_method": "classify",
        "memory_key": "full_text",
        "query_generator_key": "full_text",
        "gold_document_key": "__selected-docs__",
        "gold_sentence_key": "__selected-sentences__",
        "gold_document_titles_key": "__select-docs-titles__",
        "skip_search_key": "skip_search",
        "insert_gold_docs": false,
        "memory_extractor_phrase": "persona:",
        "retriever_ignore_phrase": "persona:",
        "query_generator_ignore_phrase": "persona:",
        "query_generator_model_file": "zoo:blenderbot2/query_generator/model",
        "query_generator_delimiter": "\n",
        "query_generator_inference": "beam",
        "query_generator_beam_size": 1,
        "query_generator_beam_min_length": 2,
        "query_generator_truncate": -1,
        "memory_retriever_truncate": -1,
        "retriever_delimiter": "\n",
        "share_search_and_memory_query_encoder": false,
        "memory_reader_model": null,
        "memory_doc_title_delimiter": " / ",
        "memory_writer_model": "bert",
        "memory_writer_model_file": "zoo:hallucination/multiset_dpr/hf_bert_base.cp",
        "add_cleaned_reply_to_history": false,
        "memory_decoder_key": "full_text",
        "memory_decoder_ignore_phrase": "persona:",
        "memory_decoder_model_file": "zoo:blenderbot2/memory_decoder/model",
        "memory_decoder_delimiter": "\n",
        "memory_decoder_beam_size": 3,
        "memory_decoder_beam_min_length": 10,
        "memory_decoder_truncate": -1,
        "memory_decoder_one_line_memories": false,
        "parlai_home": "/home/jovyan/github_repos/ParlAI",
        "override": {
            "datatype": "valid",
            "model_file": "/home/jovyan/github_repos/ParlAI/data/models/blenderbot2/blenderbot2_400M/model",
            "task": "fromfile:parlaiformat,projects.seeker_convai3.tasks.search_query",
            "fromfile_datapath": "./parlai/tasks/convai3/huggingface/convai3",
            "fromfile_datatype_extension": true,
            "multitask_weights": [
                5.0,
                1.0
            ],
            "search_server": "http://localhost:8081",
            "tensorboard_log": true,
            "tensorboard_logdir": "evaluation_convai3",
            "metrics": "ppl,f1,accuracy,hits@1,rouge,bleu",
            "report_filename": "BB2_400M.json",
            "num_examples": 5
        },
        "starttime": "Mar22_08-32"
    },
    "report": {
        "fromfile:parlaiformat/exs": 5,
        "exs": 10,
        "fromfile:parlaiformat/accuracy": 0.0,
        "fromfile:parlaiformat/precision": 0.09324561403508771,
        "fromfile:parlaiformat/recall": 0.18333333333333332,
        "fromfile:parlaiformat/f1": 0.12169312169312167,
        "fromfile:parlaiformat/bleu-1": 0.09324561403508771,
        "fromfile:parlaiformat/bleu-2": 0.01873176426683744,
        "fromfile:parlaiformat/bleu-3": 1.6046054805874542e-06,
        "fromfile:parlaiformat/bleu-4": 1.5116637566101675e-08,
        "fromfile:parlaiformat/rouge_1": 0.18333333333333332,
        "fromfile:parlaiformat/rouge_2": 0.02857142857142857,
        "fromfile:parlaiformat/rouge_L": 0.11666666666666665,
        "fromfile:parlaiformat/clen": 16.0,
        "fromfile:parlaiformat/ctrunc": 0.0,
        "fromfile:parlaiformat/ctrunclen": 0.0,
        "fromfile:parlaiformat/llen": 9.8,
        "fromfile:parlaiformat/ltrunc": 0.0,
        "fromfile:parlaiformat/ltrunclen": 0.0,
        "fromfile:parlaiformat/loss": 3.0819720248786773,
        "fromfile:parlaiformat/ppl": 21.801352842798174,
        "fromfile:parlaiformat/token_acc": 0.4897959183673469,
        "fromfile:parlaiformat/token_em": 0.0,
        "fromfile:parlaiformat/search_class": 0.4,
        "fromfile:parlaiformat/memory_class": 0.0,
        "fromfile:parlaiformat/none_class": 0.6,
        "fromfile:parlaiformat/gen_n_toks": 25.0,
        "exps": 0.06070748926548947,
        "ltpb": 9.8,
        "ltps": 0.5949352564934995,
        "ctpb": 18.0,
        "ctps": 1.0927386247788375,
        "tpb": 27.8,
        "tps": 1.6876741226966696,
        "gpu_mem": 0.1898956797537916,
        "projects.seeker_convai3.tasks.search_query/exs": 5,
        "projects.seeker_convai3.tasks.search_query/accuracy": 0.0,
        "projects.seeker_convai3.tasks.search_query/precision": 0.026666666666666665,
        "projects.seeker_convai3.tasks.search_query/recall": 0.13333333333333333,
        "projects.seeker_convai3.tasks.search_query/f1": 0.04444444444444444,
        "projects.seeker_convai3.tasks.search_query/bleu-1": 0.026666666666666665,
        "projects.seeker_convai3.tasks.search_query/bleu-2": 0.019518001458970657,
        "projects.seeker_convai3.tasks.search_query/bleu-3": 1.8029586999810263e-06,
        "projects.seeker_convai3.tasks.search_query/bleu-4": 1.767874865365184e-08,
        "projects.seeker_convai3.tasks.search_query/rouge_1": 0.13333333333333333,
        "projects.seeker_convai3.tasks.search_query/rouge_2": 0.1,
        "projects.seeker_convai3.tasks.search_query/rouge_L": 0.13333333333333333,
        "projects.seeker_convai3.tasks.search_query/clen": 76.0,
        "projects.seeker_convai3.tasks.search_query/ctrunc": 0.0,
        "projects.seeker_convai3.tasks.search_query/ctrunclen": 0.0,
        "projects.seeker_convai3.tasks.search_query/llen": 4.6,
        "projects.seeker_convai3.tasks.search_query/ltrunc": 0.0,
        "projects.seeker_convai3.tasks.search_query/ltrunclen": 0.0,
        "projects.seeker_convai3.tasks.search_query/loss": 4.355663299560547,
        "projects.seeker_convai3.tasks.search_query/ppl": 77.91849150103289,
        "projects.seeker_convai3.tasks.search_query/token_acc": 0.30434782608695654,
        "projects.seeker_convai3.tasks.search_query/token_em": 0.0,
        "projects.seeker_convai3.tasks.search_query/search_class": 1.0,
        "projects.seeker_convai3.tasks.search_query/memory_class": 0.0,
        "projects.seeker_convai3.tasks.search_query/none_class": 0.0,
        "projects.seeker_convai3.tasks.search_query/gen_n_toks": 24.8,
        "accuracy": 0.0,
        "precision": 0.05995614035087719,
        "recall": 0.15833333333333333,
        "f1": 0.08306878306878306,
        "bleu-1": 0.05995614035087719,
        "bleu-2": 0.01912488286290405,
        "bleu-3": 1.7037820902842403e-06,
        "bleu-4": 1.6397693109876757e-08,
        "rouge_1": 0.15833333333333333,
        "rouge_2": 0.0642857142857143,
        "rouge_L": 0.125,
        "clen": 46.0,
        "ctrunc": 0.0,
        "ctrunclen": 0.0,
        "llen": 7.2,
        "ltrunc": 0.0,
        "ltrunclen": 0.0,
        "loss": 3.718817662219612,
        "ppl": 49.85992217191553,
        "token_acc": 0.39707187222715173,
        "token_em": 0.0,
        "search_class": 0.7,
        "memory_class": 0.0,
        "none_class": 0.3,
        "gen_n_toks": 24.9
    }
}
